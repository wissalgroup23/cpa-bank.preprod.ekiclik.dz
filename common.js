"use strict";(self.webpackChunkek_guichet=self.webpackChunkek_guichet||[]).push([[592],{59764:(f,c,e)=>{e.d(c,{i:()=>y});var t=e(94650),_=e(82761),p=e(36016),l=e(77215),h=e(55941),d=e(36895),m=e(4859),o=e(24006);function g(u,s){if(1&u&&(t.TgZ(0,"span",9),t._uU(1),t.qZA()),2&u){const n=t.oxw();t.xp6(1),t.hij(" Quantit\xe9 disponible : ",n.maxQuantity," ")}}let y=(()=>{class u{constructor(n,i,a,r){this.router=n,this.carteService=i,this.accountService=a,this.orderService=r,this.change=new t.vpe,this.counter=1,this.invalidQuantity=!1}ngOnInit(){this.orderService.getQuanEkByConfigId(this.configId).subscribe({next:n=>{this.maxQuantity=n,this.maxQuantity<0&&(this.maxQuantity=0),this.counter>=this.maxQuantity&&(this.invalidQuantity=!0)},error:n=>{n.includes("stock not found")&&(this.maxQuantity=0)}}),this.accountService.accountSubject.subscribe(n=>{this.client=n})}increment(){this.client&&this.carteService.isCalculating$.next(!0),this.counter++,this.counter>=this.maxQuantity&&(this.invalidQuantity=!0),this.change.emit(this.counter)}ngOnChanges(n){n&&"/cart"!=this.router.url&&(this.maxQuantity=this.maxQuantity,this.invalidQuantity=!1)}decrement(){this.client&&this.carteService.isCalculating$.next(!0),this.counter>1&&this.counter--,this.counter<this.maxQuantity&&(this.invalidQuantity=!1),this.change.emit(this.counter)}onUpdate(n){this.quantity=n,this.quantity<1||this.quantity>this.maxQuantity?(this.invalidQuantity=!0,this.change.emit(this.counter)):this.change.emit(n)}isQuantity(n){this.quantity=n,this.invalidQuantity=this.quantity<1||this.quantity>this.maxQuantity}}return u.\u0275fac=function(n){return new(n||u)(t.Y36(_.F0),t.Y36(p.N),t.Y36(l.B),t.Y36(h.p))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-input-quantity"]],inputs:{maxQuantity:"maxQuantity",configId:"configId",counter:"counter"},outputs:{change:"change"},features:[t.TTD],decls:10,vars:3,consts:[[1,"",2,"position","relative","height","100%"],["class","invalid-quantity",4,"ngIf"],[1,"input-number","product__quantity"],["id","product-quantity","type","number","min","1","step","1","onkeypress","return event.keyCode === 8 || event.charCode >= 48 && event.charCode <= 57",1,"input-number__input",3,"value","ngModel","focusout","focusin","input","ngModelChange"],[1,"input-number__add"],["mat-icon-button","",3,"click"],["src","assets/icons/svgs/plus-blue.svg","alt",""],[1,"input-number__sub"],["src","assets/icons/svgs/minus-blue.svg","alt",""],[1,"invalid-quantity"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,g,2,1,"span",1),t.TgZ(2,"div",2)(3,"input",3),t.NdJ("focusout",function(){return i.onUpdate(i.counter)})("focusin",function(){return i.onUpdate(i.counter)})("input",function(){return i.isQuantity(i.counter)})("input",function(){return i.onUpdate(i.counter)})("ngModelChange",function(r){return i.counter=r}),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){return i.increment()}),t._UZ(6,"img",6),t.qZA()(),t.TgZ(7,"div",7)(8,"button",5),t.NdJ("click",function(){return i.decrement()}),t._UZ(9,"img",8),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("ngIf",i.invalidQuantity),t.xp6(2),t.s9C("value",i.counter),t.Q6J("ngModel",i.counter))},dependencies:[d.O5,m.lW,o.Fj,o.wV,o.JJ,o.qQ,o.On],styles:[".input-number[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:relative}.input-number__add[_ngcontent-%COMP%], .input-number__sub[_ngcontent-%COMP%]{position:absolute;height:100%;width:56px;top:0;cursor:pointer;-webkit-user-select:none;user-select:none;background-color:#009dcc1a;color:var(--ek-brand-blue_base);display:flex;align-items:center;justify-content:center}.input-number__sub[_ngcontent-%COMP%]{left:0;border-radius:8px 0 0 8px}.input-number__add[_ngcontent-%COMP%]{right:0;border-radius:0 8px 8px 0}.input-number__input[_ngcontent-%COMP%]{-moz-appearance:textfield;display:block;width:100%;height:100%;text-align:center;font-size:16px;font-weight:700;outline:none;padding:0;color:var(--medium-dark-shade-of-cyan-blue);border:2px solid var(--text-bg);box-sizing:border-box;border-radius:.25rem}.input-number__input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .input-number__input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}.invalid-quantity[_ngcontent-%COMP%]{height:16px;font-size:14px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.44;letter-spacing:normal;text-align:left;color:var(--cherry-red);position:absolute;bottom:-20px;min-width:200px}@media (max-width: 599px){.input-number__add[_ngcontent-%COMP%], .input-number__sub[_ngcontent-%COMP%]{width:48px}}"]}),u})()}}]);